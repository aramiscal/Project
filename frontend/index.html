<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="icon" href="favicon.png" type="image/x-icon" />
    <style>
      body {
        background-color: powderblue;
      }
      h1 {
        text-align: center;
        font-size: xx-large;
        font-style: bold;
      }
      h5 {
        margin-left: 500px;
        margin-right: 500px;
        font-size: medium;
      }
      table,
      th,
      td {
        font-size: larger;
      }
      table {
        width: 65%;
        margin-top: 20px;
        border: 5px solid black;
      }
      th {
        border: 2px solid black;
        background-color: lightgray;
      }
      td {
        border: none;
        border-top: 2px;
      }
      th,
      td {
        text-align: center;
        padding: 10px;
      }
      table.center {
        margin-left: auto;
        margin-right: auto;
      }
      p {
        font-size: x-large;
        text-align: center;
      }
      .box {
        width: 500px;
        height: auto;
        border: 3px solid black;
        background-color: lightgray;
        padding: 20px;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <h1>Shopping List</h1>

    <hr />

    <!-- Alert -->
    <div id="alert-container" class="container mt-3"></div>

    <!-- User Info -->
    <div
      id="signed-in-user"
      class="user-info d-flex justify-content-end align-items-center p-2"
      style="display: none"
    >
      <span class="me-2">Welcome</span>
      <span id="username-display" class="fw-bold me-3"></span>
      <button id="sign-out-btn" class="btn btn-outline-secondary btn-sm ms-2">
        Sign Out
      </button>
    </div>
    <h5>
      <!-- Authentication Container -->
      <div id="auth-container" class="auth-container">
        <ul class="nav nav-tabs" id="auth-tab" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="signin-tab"
              data-bs-toggle="tab"
              data-bs-target="#signin"
              type="button"
              role="tab"
              aria-controls="signin"
              aria-selected="true"
            >
              Sign In
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="signup-tab"
              data-bs-toggle="tab"
              data-bs-target="#signup"
              type="button"
              role="tab"
              aria-controls="signup"
              aria-selected="false"
            >
              Sign Up
            </button>
          </li>
        </ul>
        <div class="tab-content pt-3" id="auth-tab-content">
          <!-- Sign In Form -->
          <div
            class="tab-pane fade show active"
            id="signin"
            role="tabpanel"
            aria-labelledby="signin-tab"
          >
            <form id="sign-in-form">
              <div class="mb-3">
                <label for="signin-username" class="form-label">Username</label>
                <input
                  type="text"
                  class="form-control"
                  id="signin-username"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="signin-password" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="signin-password"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary">Sign In</button>
            </form>
          </div>

          <!-- Sign Up Form -->
          <div
            class="tab-pane fade"
            id="signup"
            role="tabpanel"
            aria-labelledby="signup-tab"
          >
            <form id="sign-up-form">
              <div class="mb-3">
                <label for="signup-username" class="form-label">Username</label>
                <input
                  type="text"
                  class="form-control"
                  id="signup-username"
                  required
                  autocomplete="username"
                />
              </div>
              <div class="mb-3">
                <label for="signup-email" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="signup-email"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="mb-3">
                <label for="signup-password" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="signup-password"
                  required
                  autocomplete="new-password"
                />
                <div class="form-text">
                  Password must be at least 8 characters long.
                </div>
              </div>
              <div class="mb-3">
                <label for="signup-confirm-password" class="form-label"
                  >Confirm Password</label
                >
                <input
                  type="password"
                  class="form-control"
                  id="signup-confirm-password"
                  required
                  autocomplete="new-password"
                />
              </div>
              <button type="button" class="btn btn-primary" onclick = "signUp()">Sign Up</button>
            </form>
          </div>
        </div>
      </div>
    </h5>

    <!-- Adding Items Box -->
    <div class="box">
      <div class="input-group mb-3">
        <!-- Input Item -->
        <input
          id="new-name"
          type="text"
          class="form-control"
          placeholder="Item"
          aria-label="Item"
        />
        <span class="input-group-text">#</span>
        <!-- Input Quanitity -->
        <input
          id="new-quantity"
          type="text"
          class="form-control"
          placeholder="Quantity"
          aria-label="Quantity"
        />
      </div>
      <div class="input-group mb-3">
        <label class="input-group-text" for="inputGroupSelect01">Type</label>
        <!-- Input Type -->
        <select class="form-select" id="new-type">
          <option selected>Choose...</option>
          <option value="Fruit">Fruit</option>
          <option value="Vegetable">Vegetable</option>
          <option value="Meat">Meat</option>
          <option value="Seafood">Seafood</option>
          <option value="Grain">Grain</option>
          <option value="Dairy">Dairy</option>
        </select>
      </div>
      <div class="input-group input-group-sm mb-3">
        <span class="input-group-text" id="inputGroup-sizing-sm">$</span>
        <!-- Input Price -->
        <input
          id="new-price"
          type="num"
          min="0"
          aria-label="Price"
          aria-describedby="Price"
        />
      </div>
      <button id="add-item" type="button" class="button">Add Item</button>
      <!-- Add Button -->
    </div>

    <!-- Table -->
    <table class="center">
      <thead>
        <tr>
          <th scope="col">Item</th>
          <th scope="col">Type</th>
          <th scope="col">Quantity</th>
          <th scope="col">Price in $</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody id="list-rows"></tbody>
    </table>
    <div class="auth-required" style="display: none">
      <p>
        <b>Total: $</b>
        <span id="update-price"></span>
      </p>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="frontend_test.js"></script>
    <script src="auth.js"></script>
    <script src="main.js">
      /* main.js script here */
    </script>
    <script>
      // Add this to verify passwords match
      document.addEventListener("DOMContentLoaded", function () {
        // Check if password confirmation field exists
        const confirmPasswordField = document.getElementById(
          "signup-confirm-password"
        );
        if (confirmPasswordField) {
          // Add form validation for matching passwords
          document
            .getElementById("sign-up-form")
            .addEventListener("submit", function (e) {
              const password = document.getElementById("signup-password").value;
              const confirmPassword = confirmPasswordField.value;

              if (password !== confirmPassword) {
                e.preventDefault();
                showAlert("Passwords do not match", "danger");
                return false;
              }
            });
        }
      });
    </script>
  </body>
</html>
